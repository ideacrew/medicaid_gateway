<h1>Determinations</h1>
<h2><% if @application_id %>Only showing those with application id of <%= @application_id %><% end %></h2>
<h2 class="text-muted mb-3"><%= @applications.count %> determinations during this range</h2>
<%= render partial: "date_range", locals: {start_on: @start_on, end_on: @end_on, session_name: 'ma_', action: '/medicaid_application_check'} %>
<table class="table table-striped table-responsive mt-3 table-overrides">
	<thead>
		<tr>
			<th>Application Identifer</th>
			<th>Updated At</th>
			<th>Medicaid Request Payload</th>
			<th>Medicaid Response Payload</th>
			<th>Application Request Payload</th>
            <th>Application Response Payload</th>
            <th>Other Computed Factors</th>
            <th>Link</th>
		</tr>
	</thead>
	<tbody>
		<% @applications.each do |application| %>
			<tr>
				<td>
				  <%= application.application_identifier %>
				</td>
				<td><%= application.created_at %></td>
				<td><%= "✓" if application.medicaid_request_payload %></td>
				<td><%= "✓" if application.medicaid_response_payload %></td>
				<td><%= "✓" if application.application_request_payload %></td>
				<td><%= "✓" if application.application_response_payload %></td>
				<td><%= application.other_factors == "No other factors" ? "No other factors" : "✓" %></td>
				<td><%= link_to 'Details', application, class: 'btn btn-primary' %></td>
			</tr>
		<% end %>
	</tbody>
</table>

<%= paginate @applications %>